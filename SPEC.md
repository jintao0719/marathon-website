# 马拉松训练规划网站规格说明书

## 一、项目概述

### 1.1 项目背景

随着马拉松运动的日益普及，越来越多跑步爱好者希望能够科学系统地训练，以达成个人最佳成绩（PB）或完成人生首马。然而，专业的训练计划通常需要教练定制，对于普通跑者而言难以获取。本项目旨在为马拉松爱好者提供一个智能化的在线训练规划工具，基于科学的马拉松训练方法论，为不同水平的跑者生成个性化的训练课表。

### 1.2 项目目标

本项目的核心目标是为马拉松跑者提供一套科学、合理、可执行的训练计划生成系统。用户只需输入当前水平、目标成绩、比赛日期和每周可投入的训练时间，系统即可自动生成覆盖整个备赛周期的训练课表。系统将依据跑者的实际情况，智能调整训练强度、跑量递增速度和休息安排，确保训练的科学性和安全性。

### 1.3 目标用户

本产品的目标用户群体主要包括以下几类：

第一类是初学者跑者，即从未完成过全程马拉松的跑步爱好者，他们的目标通常是顺利完赛并体验马拉松的魅力。第二类是进阶跑者，他们已经拥有一定的跑步基础，渴望突破个人最佳成绩。第三类是精英跑者，他们追求更高水平的竞技表现，需要更精细化的训练规划。此外，还有一些跑步俱乐部和教练可能使用本系统为学员生成基础训练框架。

### 1.4 技术选型

考虑到项目需要前后端协作、易于部署维护以及长期可扩展性，本项目采用以下技术栈：

**前端框架**选用 Next.js 14（App Router），这是 React 生态中最成熟的全栈框架，支持服务端渲染，有利于 SEO 和首屏加载性能。**编程语言**采用 TypeScript，通过静态类型检查减少运行时错误，提升代码可维护性。**样式方案**使用 Tailwind CSS，提供原子化的 CSS 类，便于快速构建响应式界面。**状态管理**采用 React Hooks（useState、useContext），满足本项目的数据流需求。**日期处理**使用 date-fns 库，提供轻量级的日期操作功能。

## 二、用户界面与体验规格

### 2.1 整体视觉风格

本网站的视觉设计以运动、活力、专业为核心调性，同时保持界面清爽易读。整体风格采用现代简约设计语言，通过大留白、清晰的信息层级和精准的视觉引导，帮助用户快速完成输入并获取结果。

配色方案以深蓝色作为主色调，传达专业与信任感。辅助色采用活力橙色的渐变效果，象征运动的激情与能量。背景色使用浅灰白色，保持页面通透感的同时减少视觉疲劳。错误提示使用红色，警示但不刺眼；成功提示使用绿色，予人以积极正面的反馈。

### 2.2 页面结构与布局

网站采用单页应用模式，主要分为三个核心区域：顶部导航区、内容主区域和页脚信息区。

**顶部导航区**高度为 64 像素，固定于页面顶部，包含网站 Logo 和简洁的导航链接。Logo 采用跑步者剪影结合文字的设计，简洁有力。导航仅保留「首页」和「关于」两个入口，保持极简。

**内容主区域**是用户交互的核心，占据页面主要空间。该区域采用垂直滚动布局，包含输入表单区和结果展示区两个部分。输入表单区位于页面上半部分，以卡片形式呈现，包含所有必要的输入字段。结果展示区位于页面下半部分，以日历视图的形式展示训练计划。

**页脚信息区**高度为 48 像素，包含版权信息、免责声明和技术栈标识。免责声明需明确说明本产品生成的训练计划仅供参考，用户应根据自身身体状况调整训练强度。

### 2.3 响应式断点设计

本网站采用移动优先的响应式设计策略，定义了以下三个主要断点：

移动端断点设置在 640 像素以下，这是大多数智能手机的屏幕宽度。在此断点下，输入表单采用单列布局，每个输入框占满整行宽度。日历视图采用简化模式，仅显示关键信息（日期、训练类型、距离），详情通过点击展开。

平板端断点设置在 640 像素到 1024 像素之间。在此断点下，输入表单保持单列但宽度受限，页面两侧留有适度边距。日历视图可显示更多信息列。

桌面端断点设置在 1024 像素以上，这是标准显示器和笔记本电脑的常用宽度。在此断点下，输入表单采用双列布局，最大宽度限制在 800 像素内以保持适中的阅读宽度。日历视图以表格形式完整展示所有信息列。

### 2.4 组件设计规范

#### 2.4.1 输入组件

所有输入框采用统一的高度和圆角设计。输入框高度统一为 48 像素，圆角半径为 8 像素。边框颜色在默认状态下为灰色（#D1D5DB），获得焦点时渐变为主色（#2563EB），错误状态下为红色（#EF4444）。每个输入框下方配置对应的标签文字，标签字体大小为 14 像素，字体颜色为深灰色（#374151）。

下拉选择框使用与输入框相同的样式规范，下拉箭头采用自定义 SVG 图标。日期选择器使用浏览器原生 input[type="date"] 组件，样式经过微调以保持一致性。

#### 2.4.2 按钮组件

主要按钮采用填充式设计，背景色为主色（#2563EB），文字为白色，悬停时背景色加深为 #1D4ED8。按钮高度为 48 像素，圆角半径为 8 像素，水平内边距为 24 像素。过渡动画时长为 150 毫秒。

次要按钮采用边框式设计，边框宽度为 2 像素，边框和文字颜色为主色，背景透明。悬停时背景色变为淡蓝色（#EFF6FF）。

禁用状态按钮的透明度降低至 50%，光标变为禁止符号。

#### 2.4.3 卡片组件

卡片容器采用白色背景（#FFFFFF），边框圆角半径为 12 像素。卡片阴影采用柔和的投影效果：box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1)。卡片内部 padding 设置为 24 像素。

分组卡片（输入项分组）使用淡灰色背景（#F9FAFB）区分，首行标题字体加粗并带有主色调的下边框装饰。

#### 2.4.4 日历表格组件

日历表格采用周一到周日的标准列布局，每周一行。表头背景色为淡灰色（#F3F4F6），字体加粗。单元格高度至少为 80 像素，以适应内容较长的训练日。

训练类型通过颜色编码区分：轻松跑为绿色（L类型），配速跑为蓝色（T类型），长跑为橙色（L类型），休息日为灰色（R类型），节奏跑为紫色（Tempo），间歇跑为红色（Interval）。每种训练类型在日历格中以小圆点或色块标识。

### 2.5 动画与过渡效果

页面加载时采用淡入动画，持续时间 300 毫秒，使用缓出函数（ease-out）。输入表单提交后，结果区域以滑动向上的方式出现，持续时间 400 毫秒。

按钮悬停采用颜色渐变过渡，持续时间 150 毫秒。日历格悬停时轻微放大（scale: 1.02），同时显示完整的训练详情气泡。

错误提示以抖动动画出现，提示用户注意输入问题。成功状态以勾选图标淡入的方式呈现，给予用户正向反馈。

### 2.6 字体排版规范

本项目使用的字体为系统默认字体栈：-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif。在中文系统上会自动回退到 PingFang SC（苹果）、Microsoft YaHei（Windows）等中文字体。

标题字体大小规范如下：页面主标题为 32 像素，字体粗细为 700（bold）；卡片标题为 20 像素，字体粗细为 600（semibold）；节段标题为 16 像素，字体粗细为 600（semibold）。

正文字体大小为 16 像素，行高为 1.5。辅助文字（如标签、提示）为 14 像素，行高为 1.4。最小可读文字为 12 像素，仅用于版权信息等非关键内容。

## 三、功能规格

### 3.1 核心功能列表

本项目的核心功能围绕训练计划生成这一主线展开，主要包含以下五个功能模块：

**用户信息采集模块**负责收集用户的基本跑步信息和训练条件，包括当前水平、目标成绩、比赛日期、每周可用训练次数和每周可用训练里程数等关键参数。

**跑者水平评估模块**根据用户输入的当前 PB（个人最佳成绩），自动判定用户的跑步水平层级。系统将跑者分为五个层级：初学者（5小时以上）、休闲跑者（4-5小时）、进阶跑者（3.5-4小时）、熟练跑者（3-3.5小时）和精英跑者（3小时以内）。

**备赛周期计算模块**根据用户设定的比赛日期和当前训练水平，计算可用的训练周数。系统将自动排除比赛周本身，仅计算完整的训练周期。

**训练计划生成模块**是系统的核心算法模块，根据马拉松训练的科学方法论，结合用户的实际情况，生成完整的训练课表。该模块需要考虑训练周期的阶段划分（基础期、构建期、峰值期、 taper 期）、每周训练类型的合理搭配、跑量的渐进增加原则、休息和恢复的合理安排等因素。

**训练日历展示模块**将生成的训练计划以直观的日历形式呈现，用户可以按周查看训练内容，包括训练日期、训练类型、计划距离、配速要求和备注说明等详细信息。

### 3.2 用户输入字段详解

#### 3.2.1 目标马拉松类型

用户需要选择计划参加的比赛类型，选项包括：全程马拉松（42.195公里）、半程马拉松（21.0975公里）和十公里（10公里）。不同比赛类型将影响训练计划的总跑量和强度安排。

#### 3.2.2 当前个人最佳成绩

用户需要输入当前的最佳成绩，格式为「时:分:秒」。这个字段是评估用户水平和计算训练强度的重要依据。系统需要验证输入格式的正确性，时分秒的范围分别为时（0-99）、分（0-59）、秒（0-59）。

#### 3.2.3 目标个人最佳成绩

用户需要输入期望达成的目标成绩，格式与当前成绩相同。系统需要验证目标成绩必须优于当前成绩，以确保训练方向的合理性。

#### 3.2.4 下一场比赛日期

用户需要选择计划参加的比赛日期，这是一个必填字段。系统需要验证比赛日期必须晚于当前日期，且间隔至少 8 周，以保证有足够的训练时间。对于间隔不足 8 周的情况，系统将给出提示并提供缩减版训练计划。

#### 3.2.5 每周训练次数

用户需要选择每周可投入的训练次数，范围从 3 次到 7 次。训练次数直接影响每周的总跑量和训练类型的多样性。一般而言，3-4 次适合初学者，5-6 次适合进阶跑者，7 次适合高水平跑者。

#### 3.2.6 每周训练公里数

用户需要输入每周可跑的总公里数，这是一个范围输入，单位为公里。该数据将作为训练计划跑量递增的基准参考。系统会根据用户的当前水平和比赛类型，给出建议的周跑量范围。

#### 3.2.7 当前周训练公里数（可选）

用户可以选择输入当前的周训练公里数，以便系统更精准地安排训练计划的起始点。如果不输入，系统将使用一个估算值作为起点。

### 3.3 训练算法核心逻辑

#### 3.3.1 训练周期阶段划分

科学的马拉松训练通常将备赛周期划分为四个阶段，每个阶段有不同的训练重点：

**基础期（第1-4周）**是训练的奠基阶段，重点是建立有氧基础和跑步习惯。此阶段的长跑距离保持在较短的水平，每周仅增加少量里程（5-10%），训练强度以轻松跑为主占比约70%，节奏跑和间歇跑的比例较低。

**构建期（第5-8周）**是体能积累的关键阶段，逐步增加训练强度和跑量。此阶段开始引入更多的配速训练和长跑，长跑距离逐渐延长至接近比赛距离的 80%，间歇跑的比例开始上升。

**峰值期（第9-倒数第3周）**是训练强度达到最高的阶段，重点是提升速度和耐力。此阶段进行大量的节奏跑和间歇跑，长跑距离达到或超过比赛距离（根据训练计划需要），训练强度达到峰值。

**Taper 期（最后2周）**是比赛前的调整阶段，目的是让身体恢复到最佳状态。此阶段大幅减少训练量至正常水平的 60-70%，保持训练强度但缩短训练时间，确保以最佳状态迎接比赛。

#### 3.3.2 跑量递增规则

跑量的递增需要遵循科学的原则，既要保证训练效果，又要避免过度训练和受伤风险。本系统采用以下递增规则：

每周总跑量的增加幅度不超过前一周的 10%。当训练周期超过 12 周时，在第 8-10 周设置减量周（跑量减少 20-30%），帮助身体适应和恢复。长跑距离通常不超过周跑量的 30-35%。最后两周的 Taper 期，跑量按照每周递减 30% 的比例安排。

#### 3.3.3 训练类型分配

每周的训练类型需要合理搭配，以确保训练的系统性和全面性。本系统按照以下比例分配训练类型：

**轻松跑（Easy Run）**占比 50-60%，这是马拉松训练的基础，帮助身体恢复和建立有氧基础。配速为用户马拉松配速的 1.2-1.3 倍。

**长跑（Long Run）**占比 20-25%，每周一次，是耐力训练的核心。距离从初始的 15-20 公里逐渐增加到 30-35 公里。

**节奏跑（Tempo Run）**占比 10-15%，每周一次，在马拉松配速附近进行，帮助提升速度耐力。

**间歇跑（Interval Run）**占比 10-15%，每周一次，通过高强度的分段跑提升最大摄氧量。

**休息日（Rest Day）**根据每周训练次数确定，完全休息或进行交叉训练（游泳、骑行等）。

#### 3.3.4 配速计算逻辑

系统需要根据用户输入的马拉松成绩，计算出不同训练类型对应的配速。计算公式如下：

马拉松配速 = 马拉松距离 ÷ 目标时间。节奏跑配速 = 马拉松配速 × 0.95-1.0。间歇跑配速 = 马拉松配速 × 0.88-0.92。轻松跑配速 = 马拉松配速 × 1.15-1.25。

配速以「分:秒/公里」的格式呈现，便于跑者在训练中参考。

### 3.4 数据验证规则

#### 3.4.1 输入验证

系统需要对用户输入进行严格的验证，确保数据的合理性和可计算性。

当前 PB 和目标 PB 格式验证：必须为有效的时:分:秒格式，其中分和秒必须为 0-59 之间的整数。目标 PB 必须严格小于当前 PB（时间越短成绩越好）。比赛日期必须晚于当前日期至少 8 周，不足 8 周时给出警告但仍可生成缩减计划。每周训练次数必须为 3-7 之间的整数。每周训练公里数的范围根据比赛类型和水平有所不同：全程马拉松建议 30-120 公里，半程马拉松建议 20-80 公里，十公里建议 15-50 公里。

#### 3.4.2 边界情况处理

系统需要妥善处理以下边界情况：

训练周期不足 8 周时，系统自动切换到「冲刺训练模式」，压缩训练周期，减少长跑频次，增加每周训练强度。训练周期超过 24 周时，系统自动延长基础期，推迟高强度训练的引入。用户设定的周跑量超出推荐范围时，系统给出建议范围供参考，但允许用户自定义。比赛日期为当天或过去时，显示错误提示并阻止提交。

### 3.5 训练计划输出格式

#### 3.5.1 日历视图

训练计划以日历形式展示，每周 7 天，从比赛周的周一向前推算。每行显示一周的训练内容，包含以下信息列：周一至周日每天的训练类型、计划距离（公里）、配速要求（分:秒/公里）和备注说明。

#### 3.5.2 训练类型标识

系统使用统一的标识符表示训练类型：E 表示轻松跑（Easy），T 表示配速跑（Threshold/Tempo），L 表示长跑（Long），R 表示休息（Rest），I 表示间歇跑（Interval），M 表示马拉松配速跑（Marathon Pace）。

每种类型以不同颜色的标签呈现，便于用户快速识别。

#### 3.5.3 详细训练说明

点击日历中的具体训练日，可以展开查看该次训练的详细信息，包括：训练目的说明、具体的跑步距离和配速要求、训练时的注意事项、以及热身和冷身建议。

### 3.6 错误处理与用户反馈

#### 3.6.1 表单验证错误

当用户输入不符合要求时，系统应立即在对应的输入框下方显示错误提示，提示文字应清晰说明问题所在和修正方法。错误状态下的输入框边框变为红色，同时显示错误图标。

#### 3.6.2 计算错误

如果训练计划计算过程中出现异常，系统应捕获错误并显示友好的错误提示，同时记录错误日志以便排查。不应向用户暴露技术细节。

#### 3.6.3 成功反馈

当训练计划成功生成时，系统应以动画形式展示结果区域，并显示「训练计划已生成」的提示信息，增强用户的成就感。

## 四、技术架构规格

### 4.1 项目结构

本项目采用 Next.js 14 的 App Router 架构，目录结构如下：

```
marathon-trainer/
├── app/
│   ├── layout.tsx          # 根布局组件
│   ├── page.tsx            # 首页
│   ├── globals.css         # 全局样式
│   └── api/
│       └── training/       # 训练计划生成 API
│           └── route.ts
├── components/
│   ├── TrainingForm.tsx    # 输入表单组件
│   ├── TrainingCalendar.tsx # 日历展示组件
│   ├── InputField.tsx      # 输入框组件
│   ├── Button.tsx          # 按钮组件
│   └── CalendarDay.tsx     # 日历单元格组件
├── lib/
│   ├── training.ts         # 训练算法核心逻辑
│   ├── types.ts            # TypeScript 类型定义
│   └── utils.ts            # 工具函数
├── public/
│   └── ...                 # 静态资源
├── package.json
├── tsconfig.json
├── tailwind.config.ts
└── next.config.js
```

### 4.2 核心类型定义

```typescript
// 用户输入数据
interface UserInput {
  raceType: 'full' | 'half' | 'tenk';
  currentPB: string;        // 格式: "HH:MM:SS"
  targetPB: string;         // 格式: "HH:MM:SS"
  raceDate: string;         // 格式: "YYYY-MM-DD"
  weeklyDays: number;       // 3-7
  weeklyDistance: number;   // 公里数
  currentWeeklyDistance?: number;
}

// 训练水平等级
type RunnerLevel = 
  | 'beginner'      // 5小时以上
  | 'recreational'  // 4-5小时
  | 'intermediate'  // 3.5-4小时
  | 'advanced'      // 3-3.5小时
  | 'elite';        // 3小时以内

// 训练类型
type TrainingType = 
  | 'E' | 'T' | 'L' | 'R' | 'I' | 'M';

// 单次训练
interface TrainingSession {
  date: string;
  dayOfWeek: number;
  type: TrainingType;
  distance: number;         // 公里
  pace?: string;             // "MM:SS"
  notes?: string;
}

// 训练周
interface TrainingWeek {
  weekNumber: number;
  phase: 'base' | 'build' | 'peak' | 'taper';
  totalDistance: number;
  sessions: TrainingSession[];
}

// 训练计划
interface TrainingPlan {
  weeks: TrainingWeek[];
  runnerLevel: RunnerLevel;
  marathonPace: string;
}
```

### 4.3 API 设计

训练计划生成通过 Next.js API Route 处理，接口设计如下：

**请求端点**：POST /api/training

**请求体**：
```json
{
  "raceType": "full",
  "currentPB": "04:30:00",
  "targetPB": "04:00:00",
  "raceDate": "2025-04-20",
  "weeklyDays": 5,
  "weeklyDistance": 50,
  "currentWeeklyDistance": 30
}
```

**响应体**：
```json
{
  "success": true,
  "data": {
    "runnerLevel": "intermediate",
    "totalWeeks": 16,
    "marathonPace": "5:41",
    "weeklyPlan": [
      {
        "weekNumber": 1,
        "phase": "base",
        "totalDistance": 35,
        "sessions": [
          { "date": "2024-12-16", "dayOfWeek": 1, "type": "E", "distance": 8, "pace": "7:00", "notes": "轻松跑" },
          // ...
        ]
      }
    ]
  }
}
```

### 4.4 样式配置

Tailwind CSS 配置需要覆盖以下自定义内容：

颜色变量需要在 theme 中扩展，添加主色 blue-600（#2563EB）、辅助色 orange-500（#F97316）等。响应式断点采用默认配置：sm（640px）、md（768px）、lg（1024px）、xl（1280px）。

## 五、验收标准

### 5.1 功能验收

用户能够成功输入所有必填字段并提交表单。系统能够正确验证输入数据的合法性并给出清晰的错误提示。系统能够根据输入生成完整的训练计划日历。日历能够正确显示每周的训练内容，包括类型、距离和配速。训练计划遵循科学的训练周期阶段划分原则。训练跑量的递增遵循 10% 规则和 Taper 原则。

### 5.2 视觉验收

页面在移动端、平板端和桌面端均能正确显示且布局合理。输入表单的样式统一美观，按钮交互效果流畅。日历视图的颜色编码正确区分训练类型。整体配色方案符合运动专业感，清爽不杂乱。

### 5.3 性能验收

页面首屏加载时间不超过 3 秒。训练计划生成时间不超过 2 秒。页面在滚动时无明显卡顿。表单提交和结果展示的动画流畅自然。

### 5.4 兼容性验收

页面在 Chrome、Firefox、Safari、Edge 等主流浏览器中正常显示。移动端 Safari 和 Chrome 正常交互。表单在各种屏幕尺寸下输入体验良好。
